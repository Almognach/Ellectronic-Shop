@using Microsoft.AspNetCore.Identity
@using Electro_Shop.Areas.Identity.Data

@model Electro_Shop.Models.PastOrdersView

@inject UserManager<ApplicationUser> UserManager
@inject SignInManager<ApplicationUser> SignInManager

@{
    ViewData["Title"] = "Shopping cart:";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Scripts {

    <script>new WOW().init();</script>
}

@if (SignInManager.IsSignedIn(User))
{

    <link rel="stylesheet" href="https://allyoucan.cloud/cdn/icofont/1.0.1/icofont.css" integrity="sha384-jbCTJB16Q17718YM9U22iJkhuGbS0Gd2LjaWb4YJEZToOPmnKDjySVa323U+W7Fv" crossorigin="anonymous">

    <div class="container">
        <link rel="stylesheet" href="~/css/PastOrders.css" />
        <div class="row">
            <div class="col-md-3">
                <div class="osahan-account-page-left shadow-sm bg-white h-100">
                    <div class="border-bottom p-4">
                        <div class="osahan-user text-center">
                            <div class="osahan-user-media">
                                <img class="mb-3 rounded-pill shadow-sm mt-1" src="https://bootdey.com/img/Content/avatar/avatar1.png" alt="gurdeep singh osahan">
                                <div class="osahan-user-media-body">
                                    <p>@UserManager.GetUserName(User)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <ul class="nav nav-tabs flex-column border-0 pt-4 pl-4 pb-4" id="myTab" role="tablist">
                        <li class="nav-item">
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-9">
                <div class="osahan-account-page-right shadow-sm bg-white p-4 h-100">
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane  fade  active show" id="orders" role="tabpanel" aria-labelledby="orders-tab">
                            <h4 class="font-weight-bold mt-0 mb-4">Past Orders</h4>

                            @foreach (var order in Model.OrdersView)
                            {
                                <div class="bg-white card mb-4 order-list shadow-sm">
                                    <div class="gold-members p-4">
                                        <a >
                                        </a>
                                        <div class="media">
                                            <a >
                                                <img class="mr-4" src="/image/Banner2.jpg" alt="Generic placeholder image">
                                            </a>
                                            <div class="media-body">
                                                <a>
                                                    <span class="float-right text-info">Placed on @order.Order.TimeStamp   <i class="icofont-check-circled text-success"></i></span>
                                                </a>
                                                <h6 class="mb-2">
                                                    <a></a>
                                                    <a class="text-black">Order #@order.Order.OrderID</a>
                                                </h6>
                                                <p class="text-dark">
                                                </p>
                                                <hr>
                                                <div class="float-right">
                                                    <a class="btn btn-sm btn-primary" asp-controller="Orders" asp-action="Reorder" name="id" id="id" asp-route-id="@order.Order.OrderID"><i class="icofont-refresh"></i> REORDER</a>
                                                </div>
                                                <p class="mb-0 text-black text-primary pt-2">
                                                    <span class="text-black font-weight-bold"> Total Paid:</span> ₪@order.PricePaid
                                                </p>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            }

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

}

else
{
    <div>
        Please Login or regsiter to view your past orders
        <a style="background-color:#32c8de" class="nav-link text-dark" id="login" asp-area="Identity" asp-page="/Account/Login">Login</a>
        <br />
        <a style="background-color:#32c8de"class="nav-link text-dark" id="register" asp-area="Identity" asp-page="/Account/Register">Register</a>
    </div>

}

